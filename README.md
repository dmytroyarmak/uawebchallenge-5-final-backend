#Розв’язок завдання UWC5 на номінацію Backend +1

##Виконавець
Ярмак Дмитро Олегович

##Використані технології

Серверна частина виконана на мові JavaScript за допомогою фреймворка express(фреймворк для node.js). Переваги node.js є повна всинхронність всіх викликів (звернення до Wargamming АРІ, запис в базу даних). Для більш зручної роботи з асинхронним кодом була використана бібліотека Q - реалізація Promise для JS.

В якості бази даних була використана MongoDB, документо орієнтована база даних, яка добре підходить для вирішення даної задачі. Її переваги це велика швидкість, легка масштабованість та відсутність схеми даних, що дозволяє зберігати інші параметри статистики не змінюючи код.

##Як запустити?

### Запуск сервера

1. Встановити node.js.
2. Встановити mongodb.
3. Запустити mongod: sudo mongod
4. Змінити mongoDbUrl в congig.js (якщо потрібно).
5. В папці з проектом виконати: node app.js

### Отримання поточної статистики

Для отимання поточної статистики треба виконати GET запит на:
http://localhost:3000/account/392504/stats/current

Де 392504 - ІД акаунта

### Отримання різниці статистики

Для отимання різниці статистики треба виконати GET запит на:
http://localhost:3000/account/392504/stats/diff?from=2013-11-22T13%3A36%3A24%2B01%3A00&to=2013-11-23T15%3A36%3A24%2B02%3A00

Де 392504 - ІД акаунта
from - початок періоду, у форматі 2013-11-23T14:15:48.308Z (URL encoded версію)
to - кінець періоду, у форматі 2013-11-23T14:15:48.308Z (URL encoded версію)

Результат повертається у JSON.

##Як перевірити?

Для того щоб можна було зрунчо перевірити роботу додатку, спочатку треба заповнити БД даними, запустити термінал mongodb за допомогою команди mongo і вставити 2 записи:

use uwc5;

db.wot.insert({ "statistics" : { "spotted" : 147014, "hits" : 558303, "battle_avg_xp" : 734, "draws" : 1799, "wins" : 52007, "losses" : 38702, "capture_points" : 107781, "battles" : 92508, "damage_dealt" : 163108838, "hits_percents" : 72, "damage_received" : 114455734, "shots" : 779929, "xp" : 67922641, "frags" : 124186, "survived_battles" : 31376, "dropped_capture_points" : 99571 }, "tanks" : [  3649,   10785,  7937,   7169,   13889, 49,  54289,  14881,  13089,  9297,   13825,  11841,  9489,   14113, 11521,   9233,   5377,   10257,  7457,   16641,  2849,   8481,   7185, 8977,   8721,   273,  8993,   8449,   11073,  4369,   513,  3073, 1041,   10001,  5697,   785,  2321,   5649,   7489,   11265,  4353, 7681,   11777,  9745,   51489,  15393,  4385,   2593,   4929,   2561, 7233,   5137,   9505,   3905,   1793,   6145,   1553,   16401,  16913, 17,  12097,  8465,   7969,   5921,   3089,   1569,   16657,  3137, 4673,   4113,   3329,   3857,   4129,   6657,   6417,   1809,   53249, 1537,  1,  5409,   8705,   5185,   5905,   5153,   3873,   10817, 6209,  3345,   4881,   1313,   5393,   9473,   2049,   52497,  545,  7697,   3617,   6913,   2897,   4161,   9553,   6465,   11025,  4609, 289,  3841,   529,  4641,   6161,   1825,   801,  6401,   769,  5121,   2081,   2065,   4897,   2369,   849,  3105,   257,  1057, 1025,   2385,   6177,   7505,   4865,   54529,  5665,   6433,   8257, 833,  53537,  2833,   55073,  81,   2305,   1345,   52737,  56577 ], "date" : ISODate("2013-11-23T15:11:50.469Z"), "account_id" : 392504 });

db.wot.insert({ "statistics" : { "spotted" : 143014, "hits" : 538303, "battle_avg_xp" : 734, "draws" : 1799, "wins" : 52007, "losses" : 38702, "capture_points" : 107781, "battles" : 91508, "damage_dealt" : 163108438, "hits_percents" : 72, "damage_received" : 114455734, "shots" : 779929, "xp" : 67922641, "frags" : 124186, "survived_battles" : 31376, "dropped_capture_points" : 99571 }, "tanks" : [ 7937,   7169,   13889, 49,  54289,  14881,  13089,  9297,   13825,  11841,  9489,   14113, 11521,   9233,   5377,   10257,  7457,   16641,  2849,   8481,   7185, 8977,   8721,   273,  8993,   8449,   11073,  4369,   513,  3073, 1041,   10001,  5697,   785,  2321,   5649,   7489,   11265,  4353, 7681,   11777,  9745,   51489,  15393,  4385,   2593,   4929,   2561, 7233,   5137,   9505,   3905,   1793,   6145,   1553,   16401,  16913, 17,  12097,  8465,   7969,   5921,   3089,   1569,   16657,  3137, 4673,   4113,   3329,   3857,   4129,   6657,   6417,   1809,   53249, 1537,  1,  5409,   8705,   5185,   5905,   5153,   3873,   10817, 6209,  3345,   4881,   1313,   5393,   9473,   2049,   52497,  545,  7697,   3617,   6913,   2897,   4161,   9553,   6465,   11025,  4609, 289,  3841,   529,  4641,   6161,   1825,   801,  6401,   769,  5121,   2081,   2065,   4897,   2369,   849,  3105,   257,  1057, 1025,   2385,   6177,   7505,   4865,   54529,  5665,   6433,   8257, 833,  53537,  2833,   55073,  81,   2305,   1345,   52737,  56577 ], "date" : ISODate("2013-11-22T15:11:50.469Z"), "account_id" : 392504 });


Після чого можна запустит в браузері:
http://localhost:3000/account/392504/stats/diff?from=2013-11-22T13%3A36%3A24%2B01%3A00&to=2013-11-23T15%3A36%3A24%2B02%3A00
